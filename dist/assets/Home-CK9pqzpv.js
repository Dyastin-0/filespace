import{r as p,j as e,T as M,f as k,B as j,g as V,h as E,i as w,k as b,c as D,l as $,D as ce,m as de,n as G,o as z,b as ue,F as y,p as xe,q as L,A as J,s as U,t as pe,v as fe,w as _,x as Q,y as Z,z as me,C as he,E as ge,G as je,H as ye,I as H,J as ve,K as we,M as be,N as Ce,O as Ne,P as Me,Q as ke,R as Fe,S as $e,U as De,V as Ee,W as ee}from"./index-BKNLTqy2.js";import{S}from"./Separator-DAJ-hYCC.js";import{a as Te}from"./regex-Bon46KuK.js";const te=p.forwardRef(({type:t="text",placeholder:n,onBlur:s,onChange:a,className:r},l)=>e.jsx("input",{ref:l,type:t,placeholder:n,onBlur:s,onChange:a,className:`w-full p-2 rounded-md bg-secondary placeholder:text-secondary-foreground
        outline-none transition-all duration-300
        hover:shadow-[var(--accent-secondary)_0_0_0_2px] focus:shadow-[var(--accent-secondary)_0_0_0_2px]
        active:shadow-[var(--highlight)_0_0_0_2px] ${r}`})),v=({text:t,tooltip:n=!0})=>n?e.jsx(M,{text:t,children:e.jsx("span",{className:"block truncate",children:t})}):e.jsx("span",{className:"block truncate",children:t}),K=({title:t,children:n})=>{const{setOpen:s}=k();return e.jsxs("div",{className:`relative flex flex-col w-[400px] max-w-full p-4 gap-4 rounded-md bg-primary
			text-xs text-primary-foreground border border-secondary-accent overfflow-hidden z-50`,children:[e.jsxs("div",{className:"flex items-end font-bold gap-2 text-sm",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(v,{text:t})}),e.jsx(j,{icon:V,onClick:()=>s(!1),variant:"ghost",className:"w-fit"})]}),n]})},se=()=>{const{setOpen:t}=k(),{api:n}=E(),{mutate:s}=w(),{currentDir:a}=b(),{toastInfo:r}=D(),l=p.useRef(null);p.useEffect(()=>{l.current.focus()},[]);const c=o=>{o.preventDefault();const d=o.target[0].value;if(!d){r("Folder name cannot be empty.");return}r(`Creating ${d}...`);const i=new FormData;i.append("folder",d),i.append("path",(a==null?void 0:a.path)||""),n.post("/files",i,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{s(),r(`Folder ${d} created`),t(!1)})};return e.jsx(K,{title:"Create folder",children:e.jsxs("form",{onSubmit:c,className:"flex flex-col items-end gap-4",children:[e.jsx(te,{ref:l,placeholder:"Folder name"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsx(j,{type:"button",text:"Cancel",variant:"ghost",className:"w-full",onClick:()=>t(!1)}),e.jsx(M,{text:"Create folder",children:e.jsx(j,{type:"submit",text:"Create",icon:$,className:"w-full"})})]})]})})},_e=()=>{const{currentDir:t}=b(),{setModal:n,setOpen:s}=k(),{api:a}=E(),{mutate:r}=w(),{toastInfo:l}=D(),c=p.useRef(null),o=async d=>{const i=d.target.files;if(!i||i.length===0)return;const u=new FormData;u.append("path",t.path),Array.from(i).forEach(h=>{u.append("files",h)}),l("Uploading..."),await a.post("/files",u,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{r(),l("Uploaded successfully")})};return e.jsxs("div",{children:[e.jsxs(ce,{tooltip:"Create files",name:"Upload or create",icon:de,className:"w-fit",children:[e.jsx(G,{text:"Folder",icon:$,onClick:()=>{n(e.jsx(se,{})),s(!0)}}),e.jsx(G,{text:"File",icon:z,onClick:()=>c.current.click()})]}),e.jsx("input",{type:"file",ref:c,style:{display:"none"},onChange:o})]})},Y=1*1024*1024*1024,W=t=>t===0?"0 MB":`${(t/1024/1024).toFixed(2)} MB`,Ie=t=>--t*t*t+1,Be=()=>{const{user:t}=ue(),n=(t==null?void 0:t.UsedStorage)||0,[s,a]=p.useState(0);p.useEffect(()=>{let l=null;const c=2e3,o=d=>{l||(l=d);const i=d-l,u=Ie(Math.min(i/c,1));a(n*u),i<c&&window.requestAnimationFrame(o)};window.requestAnimationFrame(o)},[n]);const r=p.useMemo(()=>Math.min(s/Y*100,100),[s]);return e.jsxs("div",{className:`flex flex-col place-self-end gap-2 w-full max-w-md mx-auto text-xs text-primary-foreground
    bg-secondary p-2 rounded-md`,children:[e.jsxs("div",{className:"flex w-full gap-1 font-semibold",children:[e.jsx("p",{className:"text-start",children:"Storage usage"}),e.jsxs("div",{className:"text-secondary-foreground",children:[r.toFixed(2),"%"]})]}),e.jsx("div",{className:"flex flex-col w-full bg-secondary rounded-full h-3",children:e.jsx("div",{className:"rounded-full h-3 w-full transition-all duration-300",style:{background:`linear-gradient(to right, var(--highlight) ${r}%, var(--bg-primary) ${r}%)`}})}),e.jsxs("span",{className:"font-semibold",children:[W(s)," of ",W(Y)," used"]})]})},ne=({folder:t,onClick:n})=>{const[s,a]=p.useState(!1),r=t.children&&t.children.some(o=>o.type==="directory"),l=()=>{n(t),r&&a(!s)},c={open:{height:"auto",opacity:1,transition:{duration:.3}},collapsed:{height:0,opacity:0,transition:{duration:.3}}};return e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{tabIndex:0,className:"flex items-center p-2 text-xs rounded cursor-pointer focus:bg-primary hover:bg-primary transition-all duration-300",onClick:l,children:[r&&e.jsx(y,{icon:xe,className:`text-secondary-foreground mr-1 transition-all duration-300 ${s?"-rotate-90":""}`,onClick:o=>{o.stopPropagation(),a(!s)}}),e.jsx(y,{icon:t.path===""?L:$}),e.jsx("span",{className:"font-semibold ml-2",children:t.name})]},t.path),e.jsx(J,{initial:!1,children:s&&r&&e.jsx(U.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:c,className:"ml-4 overflow-hidden",children:t.children.map(o=>o.type==="directory"&&e.jsx(ne,{folder:o,onClick:n},o.path))})})]})},ae=()=>{const{files:t}=w(),{switchDir:n}=b();return t?e.jsx("div",{className:"flex flex-col w-full bg-secondary rounded-md p-2 gap-2",children:e.jsx(ne,{folder:t,onClick:s=>n(s)})}):null},Oe=()=>e.jsxs("div",{className:"flex flex-col min-w-[220px] h-full bg-primary rounded-md gap-2 p-4",children:[e.jsx(_e,{}),e.jsx(S,{}),e.jsx(ae,{}),e.jsx(S,{}),e.jsx(Be,{})]}),P=t=>{t.preventDefault(),t.stopPropagation()},Ae=t=>{P(t),t.dataTransfer.dropEffect="copy"};var oe={exports:{}};(function(t,n){(function(s,a){t.exports=a()})(pe,function(){return function(s,a,r){s=s||{};var l=a.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(i,u,h,C){return l.fromToBase(i,u,h,C)}r.en.relativeTime=c,l.fromToBase=function(i,u,h,C,f){for(var x,m,g,N=h.$locale().relativeTime||c,O=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],ie=O.length,I=0;I<ie;I+=1){var F=O[I];F.d&&(x=C?r(i).diff(h,F.d,!0):h.diff(i,F.d,!0));var T=(s.rounding||Math.round)(Math.abs(x));if(g=x>0,T<=F.r||!F.r){T<=1&&I>0&&(F=O[I-1]);var A=N[F.l];f&&(T=f(""+T)),m=typeof A=="string"?A.replace("%d",T):A(T,u,F.l,g);break}}if(u)return m;var R=g?N.future:N.past;return typeof R=="function"?R(m):R.replace("%s",m)},l.to=function(i,u){return o(i,u,this,!0)},l.from=function(i,u){return o(i,u,this)};var d=function(i){return i.$u?r.utc():r()};l.toNow=function(i){return this.to(d(this),i)},l.fromNow=function(i){return this.from(d(this),i)}}})})(oe);var Re=oe.exports;const re=fe(Re),Se=({title:t,message:n,onConfirm:s,onCancel:a})=>e.jsxs("div",{className:"flex flex-col w-[350px] max-w-[90%] border border-secondary-accent h-fit bg-primary rounded-md p-4 gap-4",children:[e.jsxs("div",{className:"flex gap-1 justify-between items-end text-sm",children:[e.jsx("div",{className:"flex-1 min-w-0 font-semibold",children:e.jsx(v,{text:t})}),e.jsx(j,{icon:V,onClick:a,className:"bg-transparent"})]}),e.jsx("p",{className:"text-xs text-primary-foreground break-words",children:n}),e.jsxs("div",{className:"flex w-full justify-end gap-2",children:[e.jsx(j,{variant:"ghost",text:"No",onClick:a}),e.jsx(j,{text:"Yes",onClick:s})]})]}),B=()=>{const{setModal:t,setOpen:n}=k();return p.useCallback(({title:a,message:r,onConfirm:l})=>{t(e.jsx(Se,{title:a,message:r,onConfirm:()=>{l(),n(!1)},onCancel:()=>n(!1)})),n(!0)},[t,n])},q=(t=[])=>{const[n,s]=p.useState({visible:!1,x:0,y:0}),a=p.useRef(null),r=o=>{o.preventDefault(),o.stopPropagation(),s({visible:!0,x:o.clientX,y:o.clientY})},l=()=>{s({visible:!1,x:0,y:0})};return p.useEffect(()=>{const o=d=>{a.current&&!a.current.contains(d.target)&&l()};return document.addEventListener("mousedown",o),document.addEventListener("scroll",l),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("scroll",l)}},[]),p.useEffect(()=>{if(n.visible&&a.current){const o=a.current.getBoundingClientRect();s(d=>({...d,x:Math.min(d.x,window.innerWidth-o.width-8),y:Math.min(d.y,window.innerHeight-o.height-8)}))}},[n.visible]),{contextMenu:n,onContextMenu:r,closeContextMenu:l,ContextMenu:()=>e.jsx(J,{children:n.visible&&e.jsx(U.div,{ref:a,onMouseEnter:o=>o.stopPropagation(),className:"fixed z-50 rounded-md bg-primary text-primary-foreground p-2 border border-secondary-accent shadow-lg",style:{top:n.y,left:n.x},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:e.jsx("ul",{className:"text-xs font-semibold",children:t.map((o,d)=>e.jsxs("li",{className:"flex p-2 gap-1 justify-end items-center cursor-pointer transition-all rounded-md duration-300 hover:bg-secondary",onClick:()=>{o.onClick(),l()},children:[o.label,o.icon&&e.jsx(y,{icon:o.icon})]},d))})})})}},le=({SelectedFile:t})=>{const{mutate:n}=w(),{setOpen:s}=k(),a=B(),{api:r}=E(),{toastInfo:l}=D(),{currentDir:c}=b(),o=()=>{if(t.path===c.path)return l("File is already in this folder.");a({title:t.type==="directory"?"Move Folder":"Move File",message:`Are you sure you want to move ${t.name} to ${c.name}?`,onConfirm:()=>{l(`Moving ${t.name}...`),r.put("/files/move",{file:{name:t.name,path:t.path,type:t.type},targetPath:c.path}).then(()=>{n(),l(`Moved ${t.name}`)}).catch(d=>{l(`Error moving ${t.name}, ${d.response.data}`)})}})};return e.jsxs(K,{title:`Move ${t.name}`,children:[e.jsx(ae,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsx(j,{className:"w-full",text:"Cancel",variant:"ghost",type:"button",onClick:()=>s(!1)}),e.jsx(M,{text:`Move ${t.type==="directory"?"folder":"file"} to ${c.path}`,children:e.jsx(j,{text:"Move",icon:(t==null?void 0:t.type)==="directory"?$:z,onClick:o,className:"w-full"})})]})]})};_.extend(re);const Pe=({file:t})=>{const{setModal:n,setOpen:s}=k(),a=B(),{mutate:r}=w(),{api:l}=E(),{toastInfo:c}=D(),{switchDir:o}=b(),d=(t.size/1024).toFixed(2),i=(d/1024).toFixed(2),u=i>=1,f=[{label:"Delete",icon:Q,onClick:()=>{a({title:"Delete Folder",message:`Are you sure you want to delete ${t.name} folder?`,onConfirm:()=>{c(`Deleting ${t.name}...`),l.delete("/files",{data:{files:[t.path+"/"]}}).then(()=>{r(),c(`Deleted ${t.name}`)})}})}},{label:"Move to",icon:$,onClick:()=>{n(e.jsx(le,{SelectedFile:t})),s(!0)}},{label:"Copy",icon:Z,onClick:()=>console.log("Option 3 clicked")}],{onContextMenu:x,ContextMenu:m,contextMenu:g}=q(f),N=t.type==="directory";return e.jsx(M,{text:t.path,disableTooltip:g.visible,children:e.jsxs("div",{tabIndex:0,className:`grid grid-cols-4 p-2 gap-2 text-xs rounded cursor-pointer focus:bg-primary hover:bg-primary
      transition-all duration-300`,onDoubleClick:()=>N&&o(t),onContextMenu:x,children:[e.jsxs("div",{className:"flex gap-2 font-semibold",children:[e.jsx(y,{icon:$,className:"text-primary-highlight"}),e.jsx(v,{text:t.name,tooltip:!1})]}),e.jsx(v,{text:t.parent.name,tooltip:!1}),e.jsx(v,{tooltip:!1,text:`${u?i:d} ${u?"MB":"KB"}`}),e.jsx(v,{tooltip:!1,text:_.unix(_(t.created).unix()).fromNow()}),e.jsx(m,{})]},t.path)})},ze=t=>{switch(t.split(".").pop().toLowerCase()){case"jpg":case"jpeg":case"png":case"gif":case"bmp":case"webp":case"tiff":return Ne;case"mp3":case"wav":case"flac":case"aac":case"ogg":return Ce;case"mp4":case"mkv":case"avi":case"mov":case"wmv":case"flv":return be;case"pdf":return we;case"txt":return H;case"js":case"jsx":case"ts":case"tsx":case"html":case"css":case"json":case"py":case"rb":case"go":case"java":case"php":case"cpp":case"c":case"cs":case"swift":case"kt":case"rs":case"xml":case"yaml":case"yml":case"sql":return ve;case"md":return H;case"xlsx":case"xls":return ye;case"docx":case"doc":return je;case"pptx":case"ppt":return ge;case"zip":case"rar":case"tar":case"gz":return he;case"svg":return me;default:return z}},Le=({name:t,onChecked:n,value:s=!1})=>e.jsxs("button",{className:`flex w-fit pl-2 pr-2 pt-1 pb-1 gap-1 rounded-md justify-center items-center	
			bg-secondary text-primary-foreground shadow-sm outline-none transition-all duration-300
      hover:shadow-[var(--accent-secondary)_0_0_0_2px] active:shadow-[var(--highlight)_0_0_0_2px]
			hover:cursor-pointer focus:shadow-[var(--accent-secondary)_0_0_0_2px]`,onClick:n,type:"button",children:[e.jsx("div",{className:`flex justify-center items-center rounded-sm pr-1 pl-1 h-3.5 w-3.5
				transition-all duration-300
				${s?"bg-secondary":"bg-primary"}`,children:e.jsx(U.div,{className:"flex justify-center items-center",initial:{opacity:0},animate:{opacity:s?1:0},children:e.jsx(y,{className:"text-xs",size:"xs",icon:Me})})}),e.jsx("p",{className:"text-xs text-primary-foreground",children:t})]}),X=[{value:30*60*1e3,text:"30 minutes"},{value:60*60*1e3,text:"an hour"},{value:24*60*60*1e3,text:"a day"},{value:7*24*60*60*1e3,text:"a week"}],Ue=({file:t})=>{const n=B(),{toastInfo:s}=D(),{api:a}=E(),{setOpen:r}=k(),[l,c]=p.useState(X[0]),o=p.useRef(null);p.useEffect(()=>o.current.focus(),[]);const d=i=>{i.preventDefault();const u=i.target[0].value;if(!Te(u))return s("Invalid email.");n({title:`Send ${t.name}`,message:`Are you sure you want to send ${t.name} to ${i.target[0].value}?`,onConfirm:()=>{s(`Sending ${t.name}...`),a.post("/files/share",{email:u,file:t.path,expiration:l}).then(()=>{s(`Sent ${t.name}`)}).catch(h=>{s(h.response.data)})}})};return e.jsx(K,{title:`Share ${t.name}`,children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:d,children:[e.jsx("h2",{className:"text-xs text-secondary-foreground",children:"Send to"}),e.jsx(te,{ref:o,placeholder:"Email",type:"email"}),e.jsxs("div",{className:"flex flex-col flex-wrap gap-2",children:[e.jsx("h2",{className:"text text-secondary-foreground",children:"Link expiration"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:X.map(i=>e.jsx(M,{text:`Expires in ${i.text}`,children:e.jsx(Le,{name:i.text,value:l.value===i.value,onChecked:u=>{u.preventDefault(),c(i)}})},i.value))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 justify-end w-full",children:[e.jsx(j,{text:"Cancel",type:"button",onClick:()=>r(!1),variant:"ghost"}),e.jsx(M,{text:"Copy link to clipboard",children:e.jsx(j,{className:"w-full",type:"button",text:"Copy link",icon:ke,onClick:()=>{navigator.clipboard.writeText(t.link),s("Link copied.")}})}),e.jsx(M,{text:"Send email",children:e.jsx(j,{className:"w-full",type:"submit",text:"Send",icon:Fe})})]})]})})};_.extend(re);const Ke=({file:t})=>{const n=B(),{setModal:s,setOpen:a}=k(),{mutate:r}=w(),{api:l}=E(),{toastInfo:c}=D(),{switchDir:o}=b(),d=(t.size/1024).toFixed(2),i=(d/1024).toFixed(2),u=i>=1,h=[{label:"Delete",icon:Q,onClick:()=>{n({title:"Delete File",message:`Are you sure you want to delete ${t.name} file?`,onConfirm:()=>{c(`Deleting ${t.name}...`),l.delete("/files",{data:{files:[t.path]}}).then(()=>{r(),c(`Deleted ${t.name}`)})}})}},{label:"Move to",icon:$,onClick:()=>{s(e.jsx(le,{SelectedFile:t})),a(!0)}},{label:"Copy",icon:Z,onClick:()=>console.log("Copy")},{label:"Share",icon:$e,onClick:()=>{s(e.jsx(Ue,{file:t})),a(!0)}}],{onContextMenu:C,ContextMenu:f,contextMenu:x}=q(h),m=ze(t.name),g=t.type==="directory";return e.jsx(M,{text:t.name,disableTooltip:x.visible,children:e.jsxs("div",{tabIndex:0,className:`grid grid-cols-4 p-2 gap-2 text-xs rounded cursor-pointer focus:bg-primary hover:bg-primary
      transition-all duration-300`,onDoubleClick:()=>g&&o(t),onContextMenu:C,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{icon:m}),e.jsx("a",{href:t.link,target:"_blank",rel:"noreferrer",className:`font-semibold transition-all duration-300 w-full
          hover:text-primary-highlight block truncate`,children:e.jsx(v,{text:t.name,tooltip:!1})})]}),e.jsx(v,{text:t.parent.name,tooltip:!1}),e.jsx(v,{tooltip:!1,text:g?"-":u?`${i} MB`:`${d} KB`}),e.jsx(v,{tooltip:!1,text:_.unix(_(t.created).unix()).fromNow()}),e.jsx(f,{})]},t.path)})},qe=()=>e.jsx("div",{className:"flex items-center p-2 rounded text-xs",children:e.jsxs("div",{className:"grid grid-cols-4 gap-2 w-full items-center font-semibold",children:[e.jsx("span",{children:"Name"}),e.jsx("span",{children:"Parent"}),e.jsx("span",{children:"Size"}),e.jsx("span",{children:"Created"})]})}),Ge=()=>{var C;const{api:t}=E(),{mutate:n}=w(),{toastInfo:s}=D(),{currentDir:a}=b(),{setModal:r,setOpen:l}=k(),c=p.useRef(null),o=[{label:"New Folder",icon:De,onClick:()=>{r(e.jsx(se,{})),l(!0)}},{label:"Upload Files",icon:Ee,onClick:()=>c.current.click()}],{onContextMenu:d,ContextMenu:i}=q(o),u=async f=>{const x=Array.from(f.target.files);if(!x||x.length===0)return;const m=new FormData;m.append("path",a.path),x.forEach(N=>{m.append("files",N)});const g=x.length>1?"files":"file";s(`Uploading ${x.length} ${g}...`),t.post("/files",m,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{n(),s(`Uploaded ${x.length} ${g}`)})},h=f=>{P(f);const x=Array.from(f.dataTransfer.files);if(x.length>25){s("You can only upload up to 5 files at a time");return}const m=new FormData;m.append("path",a.path),x.forEach(N=>{m.append("files",N)});const g=x.length>1?"files":"file";s(`Uploading ${x.length} ${g}...`),t.post("/files",m,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{n(),s(`Uploaded ${x.length} ${g}`)})};return e.jsxs("div",{className:"flex flex-col w-full h-full bg-secondary gap-2 p-4 rounded-md",onDragOver:Ae,onDragLeave:P,onDrop:h,onContextMenu:d,children:[e.jsx(qe,{}),(C=a==null?void 0:a.children)==null?void 0:C.map(f=>f.type==="directory"?e.jsx(Pe,{file:f},f.path):e.jsx(Ke,{file:f},f.path)),e.jsx(i,{}),e.jsx("input",{type:"file",ref:c,style:{display:"none"},onChange:u})]})},He=({tab:t,isLastPart:n})=>{const{fileMap:s}=w(),{currentDir:a,switchDir:r}=b();return e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{text:`Navigate to ${t.name}`,children:e.jsxs("div",{className:`flex gap-2 p-2 w-fit cursor-pointer rounded-md transition-all duration-300
					justify-center items-center
					hover:bg-secondary ${t.path===(a==null?void 0:a.path)?"bg-secondary text-highlight":"text-primary-foreground"}`,onClick:l=>{l.stopPropagation(),r(s.get(t.path))},children:[t.icon,t.path!==""&&e.jsx("span",{children:t.name})]})}),!n&&e.jsx("div",{className:"flex justify-center items-center h-full p-2",children:e.jsx(y,{icon:ee})})]})},Ye=({focus:t,setFocus:n})=>{const{fileMap:s}=w(),{switchDir:a,currentDir:r}=b(),{toastInfo:l}=D(),c=p.useRef(null),o=d=>{if(d.key==="Enter"){const i=s.get(c.current.value);i&&i.type==="directory"?a(i):l("Directory not found")}};return p.useEffect(()=>{t&&c.current&&(c.current.focus(),c.current.value=r==null?void 0:r.path)},[t]),e.jsxs("div",{className:"flex w-full h-full gap-2 justify-center items-center",children:[e.jsxs("div",{className:"flex h-full justify-center items-center",children:[e.jsx("div",{className:"flex h-full justify-center items-center p-2",children:e.jsx(y,{icon:L})}),e.jsx("div",{className:"flex h-full justify-center items-center p-2",children:e.jsx(y,{icon:ee})})]}),e.jsx("input",{ref:c,className:"outline-none w-full h-[32px] bg-secondary rounded-md p-2",onBlur:()=>n(!1),onKeyDown:o})]})},We=()=>{const{currentDir:t}=b(),[n,s]=p.useState(!1),a=t==null?void 0:t.path.split("/").filter(Boolean),r=a==null?void 0:a.map((c,o)=>{const d=a.slice(0,o+1).join("/");return{icon:e.jsx(y,{icon:$}),name:c,path:d}}),l={icon:e.jsx(y,{icon:L}),name:"Your files",path:""};return r==null||r.unshift(l),e.jsx("div",{className:"flex w-full h-[32px] gap-2 hover:cursor-text",onClick:()=>s(!0),children:n?e.jsx(Ye,{focus:n,setFocus:s}):r==null?void 0:r.map((c,o)=>e.jsx(He,{tab:c,isLastPart:o===r.length-1},c.path))})},Xe=()=>e.jsx("div",{className:"flex w-full overflow border-secondary",children:e.jsx(We,{})}),Ve=()=>{const{fileMap:t}=w();return e.jsxs("div",{className:"flex flex-col w-full h-full bg-primary gap-2 rounded-md text-xs",children:[e.jsx(Xe,{}),e.jsx(S,{}),(t==null?void 0:t.size)>0&&e.jsx(Ge,{})]})},Je=({files:t})=>e.jsx("div",{className:"flex flex-col w-full h-full bg-primary p-4 gap-2 rounded-md text-xs",children:e.jsx(Ve,{files:t})}),tt=()=>e.jsxs("div",{className:"flex w-full h-full gap-4 p-4",children:[e.jsx(Oe,{}),e.jsx(Je,{})]});export{tt as default};
